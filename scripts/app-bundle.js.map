{"version":3,"sources":["src/app.js","src/authorization-step.js","src/edit-account.js","src/environment.js","src/login.js","src/logout.js","src/main.js","src/management.js","src/not-found.js","src/signup.js","src/tweet.js","src/welcome-screen.js","src/models/broadcast.js","src/models/user.js","src/resources/index.js","src/resources/elements/login-data.js","src/services/user-gateway.js"],"names":["App","configureRouter","config","router","title","addPipelineStep","map","route","redirect","name","moduleId","nav","settings","logonRequired","restrictedToAdmins","mapUnknownRoutes","fallbackRoute","AuthorizationStep","run","instruction","next","isRestrictedRoute","getAllInstructions","some","i","console","log","isAdmin","alert","cancel","isValidUser","EditAccount","debug","testing","Login","user","isBusy","mail","password","performLogin","msg","Logout","configure","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","Management","NotFound","Signup","performSignup","Tweet","WelcomeScreen","fromObject","src","Object","assign","message","image","timestamp","id","on","User","vips","nips","LoginData","UserGateway"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { AuthorizationStep } from 'authorization-step';\n\nexport class App {\n\n  configureRouter(config, router) {\n    this.router = router;\n    config.title = 'Postillion';\n    config.addPipelineStep('authorize', AuthorizationStep);\n    config.map([\n      { route: '', redirect: 'home' },\n      { route: 'home', name: 'home', moduleId: 'welcome-screen', nav: false },\n      { route: 'login', name: 'login', moduleId: 'login', nav: true, title: 'Login' },\n      { route: 'signup', name: 'signup', moduleId: 'signup', nav: true, title: 'Signup' },\n      { route: 'account', name: 'account', moduleId: 'edit-account', nav: true, title: 'Edit Account' },\n      { route: 'tweet', name: 'tweet', moduleId: 'tweet', nav: true, title: 'Postoffice', settings: { logonRequired: true } },\n      { route: 'management', name: 'management', moduleId: 'management', nav: true, title: 'Management', settings: { restrictedToAdmins: true } },\n      { route: 'logout', name: 'logout', moduleId: 'logout', nav: true, title: 'Logout' }\n    ]);\n    config.mapUnknownRoutes('not-found');\n    config.fallbackRoute('home');\n  }\n}\n","import { inject } from 'aurelia-framework';\r\nimport { Redirect } from 'aurelia-router';\r\n// import { User } from 'user';\r\n\r\n//@inject(User)\r\nexport class AuthorizationStep {\r\n    // constructor(user) {\r\n    //     this.user = user;\r\n    // }\r\n\r\n    run(instruction, next) {\r\n        var isRestrictedRoute = instruction.getAllInstructions()\r\n            .some(i => i.config.settings.restrictedToAdmins);\r\n\r\n        console.log('Is route restricted ? ' + isRestrictedRoute);       \r\n        if (isRestrictedRoute) {\r\n            var isAdmin = false; //this.user.isAuthenticated\r\n            console.log('Is Admin ? ' + isAdmin);       \r\n            if (!isAdmin) {\r\n                alert('Please register as administrator.');\r\n               console.log('Redirect to login');\r\n                return next.cancel(new Redirect('login'));\r\n             }\r\n        }\r\n\r\n\r\n        isRestrictedRoute = instruction.getAllInstructions()\r\n            .some(i => i.config.settings.logonRequired);\r\n\r\n        console.log('Is route restricted ? ' + isRestrictedRoute);\r\n        if (isRestrictedRoute) {\r\n            var isValidUser = false; //this.user.isAuthenticated\r\n            console.log('Is valid User ? ' + isValidUser);\r\n            if (!isValidUser) {\r\n                alert('Please login first.');\r\n                console.log('Redirect to login');\r\n                return next.cancel(new Redirect('login'));\r\n            }\r\n        }\r\n        \r\n        return next();\r\n    }\r\n}","export class EditAccount { \r\n    \r\n}\r\n","export default {\n  debug: true,\n  testing: true\n};\n","import { inject } from 'aurelia-framework';\r\n//import { UserGateway } from './services/user-gateway';\r\nimport { User } from './models/user';\r\n\r\n//@inject(UserGateway)\r\nexport class Login {\r\n    constructor(user) {\r\n        //     this.userGateway = userGateway;\r\n        this.user = new User();\r\n        this.user.mail = \"x@y.z\";\r\n        this.user.name = \"ede\";\r\n        this.user.password = \"1\";\r\n    }\r\n\r\n    isBusy = false;\r\n\r\n    performLogin() {\r\n        // TODO: Logout any active user\r\n        var msg = \"Login now  \" + this.user.mail + \" \" + this.user.name + \" \" + this.user.password\r\n        console.log(msg);\r\n        alert(msg);\r\n        // TODO: Validate user input\r\n    }\r\n}\r\n","export class Logout { \r\n    // TODO : Cleanup user object\r\n}\r\n","import environment from './environment';\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n  \n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export class Management {}\r\n","export class NotFound {}\n","import { inject } from 'aurelia-framework';\r\n//import { UserGateway } from './services/user-gateway';\r\nimport { User } from './models/user';\r\n\r\n//@inject(UserGateway)\r\nexport class Signup {\r\n    constructor(user) {\r\n        //     this.userGateway = userGateway;\r\n        this.user = new User();\r\n        this.user.mail = \"x@y.z\";\r\n        this.user.name = \"ede\";\r\n        this.user.password = \"1\";\r\n    }\r\n\r\n    isBusy = false;\r\n\r\n    performSignup() {\r\n        var msg = \"Signup now  \" + this.user.mail + \" \" + this.user.name + \" \" + this.user.password\r\n        console.log(msg);\r\n        alert(msg);\r\n        // TODO : try register as new user\r\n    }\r\n}\r\n","export class Tweet {}\r\n","export class WelcomeScreen {}","import { ValidationRules } from 'aurelia-validation';\r\n\r\nexport class Tweet {\r\n    static fromObject(src) {\r\n        const user = Object.assign(new Tweet(), src);\r\n        return user;\r\n    }\r\n\r\n    constructor() {\r\n        ValidationRules\r\n            .on(this);\r\n    }\r\n\r\n    message = '';\r\n    image = '';\r\n    timestamp = '';\r\n    id = '';\r\n}","//import { ValidationRules } from 'aurelia-validation';\r\n\r\n///@inject(ValidationRules);\r\nexport class User {\r\n    static fromObject(src) {\r\n        const user = Object.assign(new User(), src);\r\n        return user;\r\n    }\r\n\r\n    mail = '';\r\n    name = '';\r\n    password = '';\r\n    id = '';\r\n\r\n    isAdmin = false;\r\n    // Lists of tweeters whom this user wants to follow\r\n    vips = []; // Very Important Persons (alwasy visible)\r\n    nips = []; // Normal Important Persons (visible on demand)\r\n\r\n    // constructor() {\r\n    //     ValidationRules\r\n    //         .ensure('mail')\r\n    //         .required()\r\n    //         .maxLength(250)\r\n    //         .ensure('name')\r\n    //         .required()\r\n    //         .maxLength(100)\r\n    //         .ensure('password')\r\n    //         .required()\r\n    //         .maxLength(100)\r\n    //         .ensure('id')\r\n    //         .required()\r\n    //         .maxLength(100)\r\n    //         .on(this);\r\n    // }\r\n\r\n}","export function configure(config) {\n  //config.globalResources([]);\n}\n","export class LoginData { }\r\n","export class UserGateway{}"],"sourceRoot":".."}