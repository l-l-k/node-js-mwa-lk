{"version":3,"sources":["src/app.js","src/authorization-step.js","src/edit-account.js","src/environment.js","src/login.js","src/logout.js","src/main.js","src/management.js","src/not-found.js","src/signup.js","src/tweet.js","src/welcome-screen.js","src/x.js","src/administration/index.js","src/administration/main.js","src/models/broadcast-filter.js","src/models/message.js","src/models/toolkit.js","src/models/user.js","src/resources/index.js","src/services/broadcast-gateway.js","src/services/user-gateway.js","src/validation/bootstrap-form-validation-renderer.js","src/validation/index.js","src/validation/rules.js","src/administration/components/admin-menu.js","src/administration/components/cleanup-content.js","src/administration/components/cleanup.js","src/administration/components/populate.js","src/administration/components/statistics.js","src/broadcasts/components/vip-editor.js","src/broadcasts/components/vip.js","src/resources/attributes/submit-task.js","src/resources/elements/account-detail.js","src/resources/elements/list-editor.js","src/resources/elements/user-creation.js","src/resources/value-converters/filter-by.js","src/resources/value-converters/group-by.js","src/resources/value-converters/order-by.js","src/administration/components/statistics/summary.js","src/broadcasts/components/broadcast/broadcast.js","src/broadcasts/components/history/history.js","src/broadcasts/components/history/message-filter.js","src/broadcasts/components/history/tweetTable.js"],"names":["App","configureRouter","config","router","title","addPipelineStep","map","route","redirect","name","moduleId","nav","settings","logonRequired","logoutRequired","mapUnknownRoutes","fallbackRoute","AuthorizationStep","user","run","instruction","next","console","log","mail","instructions","getAllInstructions","isRestrictedRoute","toString","isAdmin","alert","cancel","isValidUser","isAuthenticated","EditAccount","eventAggregator","userGateway","nameAlreadyChecked","mailAlreadyChecked","hasAdressChanged","hasNameChanged","hasPasswordChanged","isBusy","validationFailed","addressExists","nameExists","isValidPassword","ea","temporaryUser","nickname","password","activate","self","subscription","subscribe","updatedUser","subscription3","c","uarray","content","forEach","element","uid","id","update","deactivate","dispose","applyChanges","msg1","msg","validateInputFields","hasValidChanges","CheckNameAndMail","length","toLowerCase","hasChanges","debug","testing","usersUrl","Login","Lrouter","e","existingUser","subscription1","isSuccess","getVIPs","subscription2","x","a","active","vips","push","vip","nips","navigateToRoute","performLogin","verify","Logout","reset","configure","aurelia","use","standardConfiguration","plugin","feature","developmentLogging","start","then","setRoot","Management","NotFound","Signup","newUser","add","save","performSignup","getByMailAddress","Tweet","WelcomeScreen","X","container","get","addRoute","Administration","BroadcastFilter","fromObject","src","filter","Object","assign","persons","Array","showNoMessages","showMyMessages","showTweetsOfSpecialUser","nameOfSpecialUser","showTweetsOfActiveVips","broadcastGateway","getSomeMessages","firstday","lastDay","Message","text","image","day","time","userId","Toolkit","createGuid","replace","r","Math","random","v","getDay","now","Date","month","getMonth","slice","getDate","getFullYear","getTime","getHours","getMinutes","getSeconds","datum","getTimestamp","timestamp","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getTimestampOfFirstDay","getTimestampOfLastDay","setToday","today","isEven","number","resetSelectionRange","selectionRange","User","tool","becomeFollower","isVeryImportantPerson","globalResources","BroadcastGateway","httpClient","broadcasts","withBaseUrl","addVIP","userID","vipName","ToFollow","getByName","res","removeVIP","ToUnFollow","updateVIPStatus","isActiveVIP","PriorityChanger","addMessage","post","success","Boolean","publish","error","getMessages","person","currentUser","messages","JSON","parse","firstDay","removeMessages","useriD","sucess","UserGateway","users","admins","followers","remove","modifiedUser","username","cont","transferContentToUser","mailAddress","getAll","fetch","response","json","dto","getById","dbusers","testServerConnection","testLocalHerokuDB","setupDB","BootstrapFormValidationRenderer","render","unrender","elements","formGroup","closest","classList","message","document","createElement","className","textContent","parentNode","insertBefore","nextSibling","querySelector","removeChild","querySelectorAll","registerHandler","customRule","value","obj","undefined","isNaN","maxSize","FileList","from","every","file","size","hasOneOfExtensions","extensions","fileName","some","endsWith","ext","allHaveOneOfExtensions","files","AdminMenu","task","obsoleteUser","tryAddUser","tryDeleteUser","confirm","CleanupContent","Cleanup","of","validationController","displayMessages","activateUser","processTask","testSubmitButton3","AddUser","Statistics","ListEditorCustomElement","History","isVeryImportant","status","SubmitTaskCustomAttribute","Element","onSubmit","trySubmit","bind","attached","addEventListener","isSubmitTaskExecuting","preventDefault","Promise","resolve","completeTask","detached","removeEventListener","AccountDetail","UserCreation","addUser","FilterByValueConverter","toView","array","properties","trim","item","property","includes","GroupByValueConverter","groups","Map","key","group","items","set","values","OrderByValueConverter","direction","directionFactor","sort","item1","item2","value1","value2","retrieveSummary","emptyGrid","Broadcast","isImageAttached","imageUrl","selectedFiles","selectedImage","toolkit","detachImage","updateImageUrl","readFileURL","updatePreview","selectedFile","broadcast","reader","FileReader","onload","target","result","readAsDataURL","sendMessage","isValidMessage","encodeURIComponent","receivedTweets","timeRange","senderFilter","useRerestrictedTimeRange","cleanupTable","retrieveMessages","d1","d2","d3","d4","MessageFilter","msgFilter","history","tweetTable","dataTable","activeTable","tableType","sorting","createTableHeader","columns","header","row","col","i","createTextNode","appendChild","populateTable","tweetsToDisplay","indexOfFirstTweetProperty","amountOfColumns","body","tweetData","userRecord","rowIndex","setRowColor","colIndex","attachment","setAttribute","index","mwaToolset","removeAttribute","selectFromTo","range","rows","firstIndex","lastIndex","toggle","deselectAll","region","getElementsByTagName","deleteSelectedRows","selectedRows","getSelectedRows","selectedItems","getSelectedItems","storageWriter","deleteSelectedTweets","tweets","storageReader","getSubsetOfTweetsByID","updateContent","table","getElementsByClassName","dayIndex","timeIndex","children","innerText","tweetCreator","createTweet","subsetOfTweets","innerHTML","err","sortTextData","columnIndex","swap","j","toggleSorting","tableObject","setTableType","typeOfTable","updateTable","findTweets","currentTarget","selectedColumn","currentRow","nameOfRegion","nodeName","startIndex","upperBound","cellIndex","ctrlKey","shiftKey","allRows","deleteAllTweets","deleteUserTweets"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { AuthorizationStep } from 'authorization-step';\n\nexport class App {\n\n  // Logout-Pipeline:  \n  // => a navigation setting (here: logoutRequired) gets the route invoked\n  //    each time a navigation request is issued, so the activate-method gets called\n  configureRouter(config, router) {\n    this.router = router;\n    config.title = 'Postillion';\n    config.addPipelineStep('authorize', AuthorizationStep);\n    config.map([ \n      { route: '', redirect: 'home' },\n      { route: 'home', name: 'home', moduleId: 'welcome-screen', nav: false },\n      { route: 'login', name: 'login', moduleId: 'login', nav: true, title: 'Login' },\n      { route: 'signup', name: 'signup', moduleId: 'signup', nav: true, title: 'Signup' },\n      { route: 'account', name: 'account', moduleId: 'edit-account', nav: true, title: 'Edit Account' },\n      { route: 'tweet', name: 'tweet', moduleId: 'tweet', nav: true, title: 'Postoffice', settings: { logonRequired: true } },\n      { route: 'logout', name: 'logout', moduleId: 'logout', nav: true, title: 'Logout', settings: { logoutRequired: true } }\n    ]);\n    config.mapUnknownRoutes('not-found');\n    config.fallbackRoute('home');\n  }\n}\n\n//      { route: 'administration', name: 'administration', moduleId: 'administration/adm', nav: true, title: 'Management', settings: { restrictedToAdmins: true } },","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { Redirect } from 'aurelia-router';\r\nimport { User } from './models/user';\r\n\r\n@inject(User)\r\nexport class AuthorizationStep {\r\n    constructor(user) {\r\n        this.user = user;\r\n    }\r\n\r\n    run(instruction, next) {\r\n        //console.log(user.toString());\r\n        console.log(\"Checking route permissions of user \" + this.user.mail);\r\n        var instructions = instruction.getAllInstructions()\r\n\r\n        // Administration         \r\n        var isRestrictedRoute = false;\r\n        // isRestrictedRoute = instructions.some(\r\n        //     i => i.config.settings.restrictedToAdmins);\r\n\r\n        console.log('Is route restricted for admins ? ' + isRestrictedRoute);\r\n        if (isRestrictedRoute) {\r\n            console.log(this.user.toString());\r\n            var isAdmin = this.user.isAdmin;\r\n            console.log('Is Admin ? ' + isAdmin);\r\n            if (!isAdmin) {\r\n                alert('Please register as administrator.');\r\n                console.log('Redirect to login');\r\n                return next.cancel(new Redirect('login'));\r\n            }\r\n        }\r\n\r\n        // Run core application\r\n        // isRestrictedRoute = instructions.some(\r\n        //     i => i.config.settings.logonRequired);\r\n\r\n        console.log('Does route require login ? ' + isRestrictedRoute);\r\n        if (isRestrictedRoute) {\r\n            console.log(this.user.toString());\r\n            var isValidUser = this.user.isAuthenticated;\r\n            console.log('Is valid User ? ' + isValidUser);\r\n            if (!isValidUser) {\r\n                alert('Please login first.');\r\n                console.log('Redirect to login');\r\n                return next.cancel(new Redirect('login'));\r\n            }\r\n        }\r\n\r\n        // Logout : no action required\r\n\r\n        \r\n        // Continue        \r\n        return next();\r\n    }\r\n}","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { UserGateway } from './services/user-gateway';\r\nimport { User } from './models/user';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\n\r\n\r\n@inject(EventAggregator, UserGateway, User)\r\nexport class EditAccount {\r\n    nameAlreadyChecked = false;\r\n    mailAlreadyChecked = false;\r\n    hasAdressChanged = false;\r\n    hasNameChanged = false;\r\n    hasPasswordChanged = false;\r\n    isBusy = false;\r\n    validationFailed = false;\r\n    addressExists = false;\r\n    nameExists = false;\r\n    isValidPassword = true; // ER: validate PW-Security\r\n\r\n    constructor(eventAggregator, userGateway, user) {\r\n        this.ea = eventAggregator;\r\n        this.userGateway = userGateway;\r\n        this.user = user;\r\n        console.log(user.toString());\r\n        this.temporaryUser = new User();\r\n        this.temporaryUser.mail = this.user.mail;\r\n        this.temporaryUser.nickname = this.user.nickname;\r\n        this.temporaryUser.password = this.user.password;\r\n\r\n    }\r\n\r\n    activate() {\r\n        console.log(\"Edit-Account activted\");\r\n        var self = this;\r\n        this.subscription = this.ea.subscribe('user-updated', function (updatedUser) {\r\n            self.user.mail = updatedUser.mail;\r\n            self.user.nickname = updatedUser.nickname;\r\n            self.user.password = updatedUser.password;\r\n            console.log(\"Changed user data : \" + self.user.toString());\r\n        });\r\n\r\n       \r\n\r\n        this.subscription3 = this.ea.subscribe('user-mailNameCheck', function (c) {          \r\n            var uarray = c.content;\r\n            uarray.forEach(function (element) {\r\n           if (element.uid != self.user.id)\r\n           {\r\n               if (element.name == self.user.nickname)\r\n               {\r\n                   \r\n                   self.nameExists = true;\r\n               }    \r\n               if (element.mail == self.user.mail)\r\n               {\r\n                   self.addressExists = true;\r\n               }    \r\n           }    \r\n       }, self);\r\n\r\n       if (self.addressExists == false && self.nameExists == false)\r\n       {\r\n           self.userGateway.update(self.user, self.temporaryUser);\r\n       }    \r\n\r\n        });\r\n\r\n    }\r\n    deactivate() {\r\n        this.subscription.dispose();\r\n        this.subscription3.dispose();        \r\n    }\r\n\r\n    applyChanges() {\r\n        var msg1 = \"Original user : \" + this.user.toString();\r\n        console.log(msg1);\r\n        var msg = \"Input :  \" + this.temporaryUser.mail + \" \" + this.temporaryUser.nickname + \" \" + this.temporaryUser.password;\r\n        console.log(msg);\r\n        //alert(msg);\r\n\r\n        // aurelia-validation is much more complex\r\n        this.validateInputFields();\r\n        if (this.validationFailed) {\r\n            console.log(\"Input-Validation failed : Empty fields\");\r\n            return;\r\n        }\r\n\r\n        if (!this.hasValidChanges()) {\r\n            return;\r\n        }\r\n\r\n\r\n        this.nameAlreadyChecked = false\r\n        this.mailAlreadyChecked = false;\r\n        this.userGateway.CheckNameAndMail(this.temporaryUser.mail, this.temporaryUser.nickname);\r\n     //   this.userGateway.update(this.user, this.temporaryUser, this.hasAdressChanged, this.hasNameChanged,this.hasPasswordChanged );\r\n    }\r\n\r\n    validateInputFields() {\r\n        this.validationFailed =\r\n            this.temporaryUser.mail.length == 0 ||\r\n            this.temporaryUser.nickname.length == 0 ||\r\n            this.temporaryUser.password.length == 0;\r\n    }\r\n\r\n    hasValidChanges() {\r\n        this.hasAdressChanged = this.user.mail.toLowerCase() !== this.temporaryUser.mail.toLowerCase();\r\n        this.hasNameChanged = this.user.nickname.toLowerCase() !== this.temporaryUser.nickname.toLowerCase();\r\n        this.hasPasswordChanged = this.user.password !== this.temporaryUser.password;\r\n\r\n        var hasChanges = this.hasAdressChanged || this.hasNameChanged || this.hasPasswordChanged;\r\n        if (!hasChanges) {\r\n            console.log(\"Input-Validation result : No changes\");\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n}","export default {\n  debug: true,\n  testing: true,\n  usersUrl: 'http://localhost:3000/',\n};\n","import { inject } from 'aurelia-framework';\r\nimport { UserGateway } from './services/user-gateway';\r\nimport { User } from './models/user';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\nimport { Router } from 'aurelia-router';\r\n\r\n@inject(Router, EventAggregator, UserGateway, User)\r\nexport class Login {\r\n    constructor(router, eventAggregator, userGateway, user) {\r\n        this.Lrouter = router;\r\n        this.ea = eventAggregator;\r\n        this.userGateway = userGateway;\r\n        this.user = user;\r\n        this.user.mail = \"a@a.a\";\r\n        this.user.password = \"a\";\r\n    }\r\n\r\n    isBusy = false;\r\n    validationFailed = false;\r\n    addressExists = true;\r\n    isValidPassword = true; // ER: validate PW-Security\r\n\r\n    activate() {\r\n        console.log(\"Login activted\");\r\n        var self = this;\r\n        this.subscription = this.ea.subscribe('login-check', function (e) {\r\n            console.log(\"Login Event raised\");\r\n            console.log(e);\r\n            if (e != \"[]\") {\r\n                self.user.id = e.existingUser.id;\r\n                self.user.mail = e.existingUser.mail;\r\n                self.user.nickname = e.existingUser.nickname;\r\n                self.user.password = e.existingUser.password;\r\n                self.user.isAuthenticated = \"true\";\r\n\r\n                self.userGateway.isAdmin(self.user.id);\r\n\r\n            }\r\n        });\r\n\r\n        this.subscription1 = this.ea.subscribe('admin-check', function (e) {\r\n            console.log(\"AdminCheck Event raised\");\r\n            console.log(e);\r\n            self.user.isAdmin = e.isSuccess;\r\n            var msg = \"After Login : \" + self.user.toString();\r\n            console.log(msg);\r\n            self.userGateway.getVIPs(self.user.id);\r\n\r\n        });\r\n\r\n\r\n        this.subscription2 = this.ea.subscribe('vips-incoming', function (e) {\r\n            console.log(e.x);\r\n            if (!(e.x == \"[]\" || e.x == \"\")) {\r\n\r\n\r\n                var a = e.x;\r\n                console.log(\"wir haben \" + a);\r\n                a.forEach(function (element) {\r\n                    if (element.active == true) {\r\n                        self.user.vips.push(element.vip);\r\n                    } else {\r\n                        self.user.nips.push(element.vip);\r\n                    }\r\n                }, this);\r\n            }\r\n            self.Lrouter.navigateToRoute('tweet');\r\n        });\r\n\r\n    }\r\n    deactivate() {\r\n        this.subscription.dispose();\r\n        this.subscription1.dispose();\r\n        this.subscription2.dispose();\r\n    }\r\n    performLogin() {\r\n\r\n\r\n        var msg = \"Before Login : \" + this.user.toString();\r\n        console.log(msg);\r\n        //alert(msg);\r\n\r\n        // aurelia-validation is much more complex\r\n        this.validationFailed = this.user.mail.length == 0 || this.user.password.length == 0;\r\n        if (this.validationFailed) {\r\n            console.log(\"Input-Validation failed : Empty fields\");\r\n            return;\r\n        }\r\n\r\n        this.userGateway.verify(this.user);\r\n\r\n    }\r\n}\r\n","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { User } from './models/user';\r\n\r\n@inject(User)\r\nexport class Logout {\r\n    constructor(user) {\r\n        this.user = user;\r\n        console.log(\"Logout Route initialised with \" + this.user.mail)\r\n    }\r\n\r\n    activate() {\r\n        console.log(\"activated: Logout \" + this.user.mail )\r\n        if (this.user !== null) {\r\n            console.log(\"Before Reset: \" + this.user.mail);\r\n            this.user.reset()\r\n            console.log(\"After Reset: \"+ this.user.mail);\r\n        }\r\n    }\r\n}\r\n","import environment from './environment';\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .plugin('aurelia-validation')\n    .feature('validation')\n    .feature('resources')\n  //  .feature('broadcasts')\n    .feature('administration');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export class Management {}\r\n","export class NotFound {}\n","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\nimport { UserGateway } from './services/user-gateway';\r\nimport { User } from './models/user';\r\nimport { Router } from 'aurelia-router';\r\n\r\n@inject(Router, EventAggregator, UserGateway, User)\r\nexport class Signup {\r\n    constructor(router, eventAggregator, userGateway, user) {\r\n        this.router = router;\r\n        this.ea = eventAggregator;\r\n        this.userGateway = userGateway;\r\n        this.user = user;\r\n        this.newUser = new User();\r\n        this.newUser.mail = \"a@a.a\";\r\n        this.newUser.nickname = \"aa\";\r\n        this.newUser.password = \"a\";\r\n    }\r\n\r\n    activate() {\r\n        console.log(\"Signup activated\");\r\n        var self = this;\r\n        this.subscription = this.ea.subscribe('user-detected', function (e) {\r\n            console.log(\"Event raised\");\r\n            console.log(e);\r\n\r\n            var existingUser = e.existingUser;\r\n            // display hints if registration fails\r\n            self.addressExists = existingUser.mail != \"\";\r\n            self.nameExists = existingUser.nickname != \"\";\r\n\r\n            if (!self.addressExists && !self.nameExists) {\r\n                console.log(\"Add user\");\r\n                self.userGateway.add(self.newUser);\r\n            }\r\n        });\r\n\r\n        this.subscription2 = this.ea.subscribe('user-added', e => {\r\n            console.log(\"Event 2 raised\");\r\n            console.log(e);\r\n            //this.user = e.existingUser;          \r\n            self.router.navigateToRoute('login');\r\n        });\r\n\r\n    }\r\n\r\n    deactivate() {\r\n        this.subscription.dispose();\r\n        this.subscription2.dispose();\r\n    }\r\n\r\n\r\n    isBusy = false;\r\n    validationFailed = false;\r\n    addressExists = false;\r\n    nameExists = false;\r\n    isValidPassword = true; // ER: validate PW-Security\r\n\r\n    save() {\r\n        console.log(\"W\");\r\n        alert('SAVE');\r\n        //    return this.userGateway.create(this.newUser)\r\n        //        .then(() => this.router.navigateToRoute('login'));\r\n        return this.newUser;\r\n    }\r\n\r\n\r\n    performSignup() {\r\n        var msg = \"Signup  \" + this.newUser.toString();\r\n        console.log(msg);\r\n\r\n        // aurelia-validation is much more complex\r\n        this.validationFailed =\r\n            this.newUser.mail.length == 0 ||\r\n            this.newUser.nickname.length == 0 ||\r\n            this.newUser.password.length == 0;\r\n        if (this.validationFailed) {\r\n            console.log(\"Input-Validation failed\");\r\n            //  alert(msg);\r\n            return;\r\n        }\r\n\r\n        //  var txt = this.userGateway.testLocalHerokuDB();\r\n        this.userGateway.getByMailAddress(this.newUser.mail);\r\n\r\n    }\r\n}\r\n","export class Tweet {}\r\n","export class WelcomeScreen {}","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { UserGateway } from './services/user-gateway';\r\nimport { User } from './models/user';\r\n\r\n@inject(UserGateway, User)\r\nexport class X {\r\n    constructor(userGateway, user) {\r\n        this.userGateway = userGateway;\r\n        this.user = user;\r\n        this.newUser = new User();  \r\n        this.newUser.mail = \"\";\r\n        this.newUser.nickname = \"\";\r\n        this.newUser.password = \"\";\r\n    }\r\n\r\n    isBusy = false;\r\n    validationFailed = false;\r\n    addressExists = false;\r\n    nameExists = false;\r\n    isValidPassword = true; // ER: validate PW-Security\r\n\r\n    performSignup() {\r\n        var msg = \"Signup  \" + newUser.user.toString();\r\n        console.log(msg);\r\n\r\n        // aurelia-validation is much more complex\r\n        this.validationFailed =\r\n            this.newUser.mail.length == 0 ||\r\n            this.newUser.nickname.length == 0 ||\r\n            this.newUser.password.length == 0;\r\n        if (this.validationFailed) {\r\n            console.log(\"Input-Validation failed\");\r\n            //  alert(msg);\r\n            return;\r\n        }\r\n\r\n        // try retrieving user data from storage\r\n        var existingUser = this.userGateway.getByMailAddress(this.newUser.mail);\r\n\r\n        // display hints if registration fails\r\n        this.addressExists = existingUser.mail != null && existingUser.mail.length > 0;\r\n        this.nameExists = existingUser.nickname != null && existingUser.nickname.length > 0;\r\n\r\n        // register as new user\r\n        if (!addressExists && !nameExists) {\r\n            this.userGateway.add(this.newUser);\r\n        }\r\n    }\r\n}\r\n","// feature with child router : \r\nimport { Router } from 'aurelia-router';\r\n\r\nexport function configure(config) {\r\n    const router = config.container.get(Router);\r\n    router.addRoute({\r\n        route: 'administration', name: 'administration', moduleId: 'administration/main', nav: true, title: 'Administration'\r\n    });\r\n}","// child router inside feature : \r\nimport { inlineView } from 'aurelia-framework';\r\n\r\n@inlineView('<template><router-view></router-view></template>')\r\nexport class Administration {\r\n    configureRouter(config) {\r\n        config.map([\r\n            { route: '', name: 'administration', moduleId: './components/admin-menu', title: '' },\r\n            { route: 'populate', name: 'populate', moduleId: './components/populate', title: 'Add User' },\r\n            { route: 'cleanup', name: 'cleanup', moduleId: './components/cleanup', title: \"Cleanup\" },\r\n            { route: 'statistics', name: 'statistics', moduleId: './components/statistics', title: \"Statistics\" },\r\n        ]);\r\n    }\r\n}","export class BroadcastFilter {\r\n    static fromObject(src) {\r\n        const filter = Object.assign(new BroadcastFilter(), src);\r\n        return filter;\r\n    }\r\n\r\n    isBusy = false;\r\n  \r\n    constructor() {\r\n        this.persons = new Array();   \r\n        this.showNoMessages = false;\r\n        this.showMyMessages = true;\r\n        this.showTweetsOfSpecialUser = false;\r\n        this.nameOfSpecialUser = \"\";\r\n        this.showTweetsOfActiveVips = false;\r\n\r\n        console.log(\"Filter created : \" );\r\n    }\r\n\r\n\r\n    activate() {\r\n        console.log(\"Filter activated\");\r\n\r\n        var self = this;\r\n\r\n        this.subscription2 = this.ea.subscribe('user-detected', function (e) {\r\n            console.log(\"Event handler for messages-detected\");\r\n            console.log(e);\r\n            var existingUser = e.existingUser;\r\n            if (existingUser.mail != \"\") {\r\n                console.log(\"Request messages for \" + existingUser.nickname);\r\n                self.persons.push(existingUser.id);\r\n                self.broadcastGateway.getSomeMessages(persons, self.firstday, self.lastDay);\r\n            } else {\r\n                console.log(\"User does not exist\");\r\n            }\r\n\r\n            self.isBusy = false;\r\n        });\r\n\r\n        this.subscription3 = this.ea.subscribe('messages-removed', function (e) {\r\n            console.log(\"Event handler for messages-deletion\");\r\n            self.isBusy = false;\r\n        });\r\n\r\n    }\r\n\r\n    deactivate() {\r\n        this.subscription1.dispose();\r\n        this.subscription2.dispose();\r\n        this.subscription3.dispose();\r\n    }\r\n\r\n\r\n}","import { ValidationRules } from 'aurelia-validation';\r\n\r\nexport class Message {\r\n    static fromObject(src) {\r\n        const msg = Object.assign(new Message(), src);\r\n        return msg;\r\n    }\r\n\r\n    constructor() {\r\n    }\r\n\r\n    text = 'My very first tweet';\r\n    image = null;\r\n    day = '';\r\n    time = '';\r\n    userId = '';\r\n\r\n    reset() {\r\n        text = '';\r\n        image = null;\r\n        day = '';\r\n        time = '';\r\n        userId = '';\r\n    }\r\n}","export class Toolkit {\r\n\r\n    createGuid() {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n            return v.toString(16);\r\n        });\r\n    }\r\n\r\n    getDay() {\r\n        var now = new Date();\r\n        var month = (\"0\" + (now.getMonth() + 1)).slice(-2);\r\n        var day = (\"0\" + now.getDate()).slice(-2)\r\n        return now.getFullYear() + \"-\" + month + \"-\" + day;\r\n    }\r\n\r\n    getTime() {\r\n        var now = new Date();\r\n        return now.getHours() + \":\" + now.getMinutes() + \":\" + now.getSeconds();\r\n    }\r\n\r\n    getDay(datum) {\r\n        var month = (\"0\" + (datum.getMonth())).slice(-2);\r\n        var day = (\"0\" + datum.getDate()).slice(-2)\r\n        return datum.getFullYear() + \"-\" + month + \"-\" + day;\r\n    }\r\n\r\n    getTimestamp(datum) {\r\n        var timestamp = datum.getUTCFullYear() + '-' +\r\n            ('00' + (datum.getUTCMonth() + 1)).slice(-2) + '-' +\r\n            ('00' + datum.getUTCDate()).slice(-2) + ' ' +\r\n            ('00' + datum.getUTCHours()).slice(-2) + ':' +\r\n            ('00' + datum.getUTCMinutes()).slice(-2) + ':' +\r\n            ('00' + datum.getUTCSeconds()).slice(-2);\r\n        return timestamp;\r\n    }\r\n\r\n    getTimestampOfFirstDay(datum) {\r\n        var timestamp = datum.getUTCFullYear() + '-' +\r\n            ('00' + (datum.getUTCMonth() + 1)).slice(-2) + '-' +\r\n            ('00' + datum.getUTCDate()).slice(-2) + ' ' +\r\n            '00' + ':' + '00' + ':' + '00';\r\n        return timestamp;\r\n    }\r\n\r\n    getTimestampOfLastDay(datum) {\r\n        var timestamp = datum.getUTCFullYear() + '-' +\r\n            ('00' + (datum.getUTCMonth() + 1)).slice(-2) + '-' +\r\n            ('00' + datum.getUTCDate()).slice(-2) + ' ' +\r\n            '23' + ':' + '59' + ':' + '59';\r\n        return timestamp;\r\n    }\r\n\r\n    setToday(today) {\r\n        var now = new Date();\r\n        var month = now.getMonth() + 1;\r\n        var day = now.getDate();\r\n        today = new Date(now.getFullYear(), month, day, 0, 0, 0, 0);\r\n    }\r\n\r\n    isEven(number) {\r\n        return (number % 2) == 0;\r\n    }\r\n\r\n    resetSelectionRange() {\r\n        selectionRange = [-1, -1];\r\n    }\r\n\r\n}","import { Toolkit } from './toolkit';\r\n\r\nexport class User {\r\n    static fromObject(src) {\r\n        const user = Object.assign(new User(), src);\r\n        return user;\r\n    }\r\n\r\n    mail = ''; //a@b.c';\r\n    nickname = ''; //otto';\r\n    password = ''; //1';\r\n    id = \"0\";\r\n    \r\n    isAuthenticated = false;\r\n    isAdmin = true;\r\n\r\n    // Lists of tweeters whom this user wants to follow\r\n    vips = []; // Very Important Persons (alwasy visible)\r\n    nips = []; // Normal Important Persons (visible on demand)\r\n\r\n    constructor() {\r\n        var tool = new Toolkit();\r\n        this.id = tool.createGuid();\r\n        console.log(\"User created : \" + this.toString());\r\n    }\r\n\r\n    toString() {\r\n        var msg = \"Current user (ID = \" + this.id + \") : \" + this.mail + \" \" + this.nickname + \" \" + this.password;\r\n        return msg;\r\n    }\r\n\r\n    becomeFollower(id, isVeryImportantPerson) {\r\n        if (isVeryImportantPerson) {\r\n            this.vips.push(id);\r\n        } else {\r\n            this.nips.push(id);\r\n        }\r\n    }\r\n\r\nreset() {\r\n    this.mail = '';\r\n    this.nickname = '';\r\n    this.password = '';\r\n    this.id = '0';\r\n\r\n    this.isAuthenticated = false;\r\n    this.isAdmin = false;\r\n\r\n    // Lists of tweeters whom this user wants to follow\r\n    this.vips = []; // Very Important Persons (alwasy visible)\r\n    this.nips = []; // Normal Important Persons (visible on demand)\r\n}\r\n}","export function configure(config) {\n  config.globalResources([\n    // './attributes/blob-src',\n    // './attributes/file-drop-target',\n     './attributes/submit-task',\n\n    // './elements/file-picker',\n    './elements/group-list.html',\n    './elements/list-editor',\n    './elements/account-detail.html',\n    './elements/login-data.html',\n    './elements/submit-button.html',\n\n    './value-converters/filter-by',\n    './value-converters/group-by',\n    './value-converters/order-by',\n  ]);\n}\n","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { HttpClient } from 'aurelia-http-client';\r\nimport { UserGateway } from './user-gateway';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\nimport { User } from './../models/user';\r\nimport environment from './../environment';\r\n\r\n@inject(EventAggregator, HttpClient, UserGateway, User)\r\nexport class BroadcastGateway {\r\n\r\n    broadcasts = [];\r\n\r\n    constructor(eventAggregator, httpClient, userGateway, user) {\r\n        this.ea = eventAggregator;\r\n        this.user = user;\r\n        this.httpClient = httpClient.configure(config => {\r\n            config\r\n                //  .useStandardConfiguration()\r\n                .withBaseUrl(environment.usersUrl);\r\n        });\r\n        this.userGateway = userGateway;\r\n    }\r\n\r\n    addVIP(userID, vipName) {\r\n        var ToFollow = this.userGateway.getByName(vipName);\r\n        // TODO : retrieve user data from storage\r\n        // name must exist !\r\n        //  compare case insensitive  ;  name is NOT stored as lower case string\r\n        var x;\r\n        this.httpClient.get('/FollowerAdd/' + userID + '/' + ToFollow.id).then(res => {\r\n            x = res.content;\r\n            console.log(x);\r\n            return x;\r\n        });\r\n\r\n\r\n    }\r\n\r\n    removeVIP(userID, vipName) {\r\n        // TODO : retrieve user data from storage\r\n        // remove vip from  must exist !\r\n        //  compare case insensitive  ;  name is NOT stored as lower case string\r\n        var ToUnFollow = this.userGateway.getByName(vipName);\r\n        var x;\r\n        this.httpClient.get('/FollowerRemove/' + userID + '/' + ToUnFollow.id).then(res => {\r\n            x = res.content;\r\n            console.log(x);\r\n            return x;\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n    updateVIPStatus(userID, vipName, isActiveVIP) {\r\n        var PriorityChanger = this.userGateway.getByName(vipName);\r\n        // TODO : retrieve user data from storage\r\n        // update entry in followers table !\r\n        //  compare vip name case insensitive  ;  name is NOT stored as lower case string\r\n        var x;\r\n        this.httpClient.get('/FollowerActivate/' + userID + '/' + PriorityChanger.id + '/' + isActiveVIP).then(res => {\r\n            x = res.content;\r\n            console.log(x);\r\n            return x;\r\n        });\r\n\r\n\r\n    }\r\n\r\n    //____________________________________________________\r\n    // Messages\r\n\r\n    addMessage(text, image) {\r\n\r\n        this.httpClient.post('/TweetAdd/' + this.user.id + '/' + text + '/' + image)\r\n            .then(res => {\r\n                try {\r\n                    var success = Boolean(res.content);\r\n                    console.log(\"content:\" + res.content + \" - success:\" + success);\r\n                    console.log(\"Raise Event message-sent \");\r\n                    if (success) {\r\n                        this.ea.publish('message-sent', { success });\r\n                    }\r\n\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            });\r\n    }\r\n\r\n    getMessages(person) {\r\n        // TODO  \r\n        var currentUser = persons[0]; // ids\r\n            this.httpClient.get('/TweetGet/' + currentUser)\r\n                .then(res => {\r\n                    try {\r\n                        var messages = [];\r\n                        if (!(res.content == \"\" || res.content == \"[]\"))\r\n                        { messages = JSON.parse(res.content); }\r\n                        console.log(\"content:\" + res.content);\r\n                        this.ea.publish('messages-downloaded', { messages });\r\n\r\n                    } catch (error) {\r\n                        console.log(error);\r\n                    }\r\n                });\r\n    }\r\n\r\n    getSomeMessages(persons, firstDay, lastDay) {\r\n        // Input: array, date-string, date-string\r\n        persons.forEach(function (element) {\r\n            this.httpClient.get('/TweetGet/' + element + '/' + firstDay + '/' +  lastDay)\r\n            .then(res => {\r\n                try {\r\n                    var messages = [];\r\n                    if (!(res.content == \"\" || res.content == \"[]\"))\r\n                    { messages = JSON.parse(res.content); }\r\n                    console.log(\"content:\" + res.content);\r\n                    this.ea.publish('messages-downloaded', { messages });\r\n\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            });\r\n        }, this);\r\n   }\r\n\r\n    removeMessages(useriD) {\r\n        // TODO \r\n        this.httpClient.post('/TweetsRemove/' + userID)\r\n            .then(res => {\r\n                try {\r\n                    var success = Boolean(res.content);\r\n                    console.log(\"content:\" + res.content + \" - success:\" + success);\r\n                    console.log(\"Raise Event message-removed \");\r\n                    if (success) {\r\n                        this.ea.publish('message-removed', { sucess });\r\n                    }\r\n\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            });\r\n    }\r\n\r\n\r\n}","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\n\r\nimport { HttpClient } from 'aurelia-http-client';\r\nimport { User } from './../models/user';\r\nimport environment from './../environment';\r\n\r\n@inject(HttpClient, EventAggregator)\r\nexport class UserGateway {\r\n\r\n    users = [];\r\n    admins = [];\r\n    followers = [];\r\n\r\n    constructor(httpClient, eventAggregator) {\r\n\r\n        this.httpClient = httpClient.configure(config => {\r\n            config\r\n                //  .useStandardConfiguration()\r\n                .withBaseUrl(environment.usersUrl);\r\n        });\r\n        this.ea = eventAggregator;\r\n    }\r\n\r\n    add(user) {\r\n        // add user data to storage\r\n        console.log('/Signup/' + user.id + '/' + user.mail.toLowerCase() + '/' + user.nickname + '/' + user.password);\r\n        this.httpClient.post('/Signup/' + user.id + '/' + user.mail.toLowerCase() + '/' + user.nickname + '/' + user.password)\r\n            .then(res => {\r\n                try {\r\n                    var success = Boolean(res.content);\r\n                    console.log(\"content:\" + res.content + \" - success:\" + success);\r\n                    if (success)\r\n                        console.log(\"Raise Event user-added \" + user);\r\n                    this.ea.publish('user-added', { user });\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            });\r\n    }\r\n\r\n    remove(user) {\r\n        // remove user and related data from storage\r\n        var success = true;\r\n        this.httpClient.post('/AccountRemove/' + user.id + '/' + user.mail.toLowerCase() + '/' + user.nickname + '/' + user.password)\r\n            .then(res => {\r\n                success = Boolean(res.content);\r\n                this.ea.publish('user-deleted', { success });\r\n            });\r\n    }\r\n\r\n\r\n    // update accout data : mail, name, password    \r\n    update(currentUser, modifiedUser) {\r\n\r\n        this.httpClient.post('/AccountEdit/' + currentUser.id + '/' + modifiedUser.mail.toLowerCase() + '/' + modifiedUser.nickname + '/' + modifiedUser.password)\r\n            .then(() => {\r\n                this.ea.publish('user-updated', { modifiedUser });\r\n            });\r\n\r\n\r\n    }\r\n\r\n\r\n    CheckNameAndMail(mail, username) {\r\n        this.httpClient.get('/MailNameCheck/' + mail + '/' + username)\r\n            .then(res => {\r\n                var content = JSON.parse(res.content);\r\n                this.ea.publish('user-mailNameCheck', { content });\r\n            });\r\n\r\n    }\r\n\r\n    // TODO validate login data : mail and password    \r\n    verify(user) {\r\n        var existingUser = new User();\r\n        console.log('/Login/' + user.mail.toLowerCase() + '/' + user.password);\r\n        this.httpClient.post('/Login/' + user.mail.toLowerCase() + '/' + user.password)\r\n            .then(res => {\r\n                try {\r\n                    var cont = res.content;\r\n                    console.log(\"content:\" + cont);\r\n\r\n                    console.log(\"Raise Event verify \" + cont);\r\n                    this.transferContentToUser(cont, existingUser);\r\n                    this.ea.publish('login-check', { existingUser });\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            });\r\n\r\n    }\r\n\r\n    getByMailAddress(mailAddress) {\r\n        var existingUser = new User();\r\n        // TODO : retrieve user data from storage\r\n        //  compare case insensitive  ;  mail address is stored as lower case string\r\n        this.httpClient.get('/UserGetByMail/' + mailAddress.toLowerCase())\r\n            .then(res => {\r\n                try {\r\n                    this.transferContentToUser(res.content, existingUser);\r\n                    console.log(\"Raise Event user-detected \" + existingUser);\r\n                    this.ea.publish('user-detected', { existingUser });\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            });\r\n        // return existingUser;\r\n    }\r\n\r\n    getByName(username) {\r\n        var existingUser = new User();\r\n\r\n        // TODO : retrieve user data from storage     \r\n        this.httpClient.get('/UserGetByName/' + username).then(res => {\r\n            try {\r\n                this.transferContentToUser(res.content, existingUser);\r\n                this.ea.publish('user-detected', { existingUser });\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        });\r\n        return existingUser;\r\n    }\r\n\r\n    // TODO: delete, demo-code only\r\n    getAll() {\r\n        return this.httpClient.fetch('users')\r\n            .then(response => response.json())\r\n            .then(dto => dto.map(User.fromObject));\r\n    }\r\n\r\n    getById(id) {\r\n        var existingUser = User;\r\n\r\n        // TODO : retrieve user data from storage     \r\n        this.httpClient.get('/UserGetByUid/' + id).then(res => {\r\n            try {\r\n                transferContentToUser(res.content, existingUser);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        });\r\n        return existingUser;\r\n    }\r\n\r\n\r\n    transferContentToUser(content, existingUser) {\r\n        console.log(\"transferContentToUser : \" + content);\r\n        if (content == \"\" || content === \"[]\") {\r\n            return;\r\n        }\r\n        var dbusers = JSON.parse(content);\r\n        if (dbusers.length == 0) {\r\n            return;\r\n        }\r\n        existingUser.id = dbusers[0].uid;\r\n        existingUser.mail = dbusers[0].mail;\r\n        existingUser.password = dbusers[0].password;\r\n        existingUser.nickname = dbusers[0].name;\r\n    }\r\n\r\n    isAdmin(userID) {\r\n        this.httpClient.get('/AdminCheck/' + userID).then(res => {\r\n            try {\r\n                this.ea.publish('admin-check', { res });\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    getVIPs(userID) {\r\n        this.httpClient.get('/FollowerGetAR/' + userID).then(res => {\r\n            var x = JSON.parse(res.content);\r\n            try {\r\n                this.ea.publish('vips-incoming', { x });\r\n                console.log(res);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    testServerConnection() {\r\n        var x = new Object();\r\n        this.httpClient.get('/test').then(res => {\r\n            x = res.content\r\n            //    res.send(res.content);\r\n            // await x.value = res.content;\r\n            // return await x;\r\n        });\r\n        return x; // expected result = Welcome ....\r\n    }\r\n\r\n    testLocalHerokuDB() {\r\n        var x;\r\n        this.httpClient.get('/db').then(res => {\r\n            x = res.content;\r\n        });\r\n        return x;  // expected result = tbl:2\r\n    }\r\n\r\n    setupDB() {\r\n        this.httpClient.post('/setupdb').then(res => {\r\n            x = res.content;\r\n        });\r\n    }\r\n}","import {ValidationRenderer, RenderInstruction, ValidationError} from 'aurelia-validation';\n\nexport class BootstrapFormValidationRenderer {\n\n  render(instruction) {\n    for (let { error, elements } of instruction.unrender) {\n      for (let element of elements) {\n        this.remove(element, error);\n      }\n    }\n\n    for (let { error, elements } of instruction.render) {\n      for (let element of elements) {\n        this.add(element, error);\n      }\n    }\n  }\n\n  add(element, error) {\n    const formGroup = element.closest('.form-group');\n    if (!formGroup) {\n      return;\n    }\n    \n    formGroup.classList.add('has-error');\n\n    const message = document.createElement('span');\n    message.className = 'help-block validation-message';\n    message.textContent = error.message;\n    message.id = `bs-validation-message-${error.id}`;\n    element.parentNode.insertBefore(message, element.nextSibling);\n  }\n\n  remove(element, error) {\n    const formGroup = element.closest('.form-group');\n    if (!formGroup) {\n      return;\n    }\n\n    const message = formGroup.querySelector(`#bs-validation-message-${error.id}`);\n    if (message) {\n      element.parentNode.removeChild(message);\n      \n      if (formGroup.querySelectorAll('.help-block.validation-message').length === 0) {    \n        formGroup.classList.remove('has-error');\n      }\n    }\n  }\n}\n","import './rules';\nimport {BootstrapFormValidationRenderer} from './bootstrap-form-validation-renderer';\n\nexport function configure(config) {\n  config.plugin('aurelia-validation');\n  \n  config.container.registerHandler('bootstrap-form', container => container.get(BootstrapFormValidationRenderer));\n}\n","import {ValidationRules} from 'aurelia-validation';\n\nValidationRules.customRule(\n  'date', \n  (value, obj) => value === null || value === undefined || value === '' || !isNaN(Date.parse(value)), \n  '${$displayName} must be a valid date.'\n);\n\nValidationRules.customRule(\n  'notEmpty',\n  (value, obj) => value && value.length && value.length > 0,\n  '${$displayName} must contain at least one item.'\n);\n\nValidationRules.customRule(\n  'maxFileSize',\n  (value, obj, maxSize) => !(value instanceof FileList)\n    || value.length === 0\n    || Array.from(value).every(file => file.size <= maxSize),\n  '${$displayName} must be smaller than ${$config.maxSize} bytes.',\n  maxSize => ({ maxSize })\n);\n\nfunction hasOneOfExtensions(file, extensions) {\n  const fileName = file.name.toLowerCase();\n  return extensions.some(ext => fileName.endsWith(ext));\n}\n\nfunction allHaveOneOfExtensions(files, extensions) {\n  extensions = extensions.map(ext => ext.toLowerCase());\n  return Array.from(files).every(file => hasOneOfExtensions(file, extensions));\n}\n\nValidationRules.customRule(\n  'fileExtension',\n  (value, obj, extensions) => !(value instanceof FileList)\n    || value.length === 0\n    || allHaveOneOfExtensions(value, extensions),\n  '${$displayName} must have one of the following extensions: ${$config.extensions.join(\\', \\')}.',\n  extensions => ({ extensions })\n);\n","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\nimport { UserGateway } from './../../services/user-gateway';\r\nimport { User } from './../../models/user';\r\n\r\n@inject(EventAggregator, UserGateway, User)\r\nexport class AdminMenu {\r\n\r\n    task = \"\";\r\n    validationFailed = false;\r\n\r\n    constructor(eventAggregator, userGateway, user) {\r\n        this.ea = eventAggregator;\r\n        this.userGateway = userGateway;\r\n        this.user = user;\r\n        this.obsoleteUser = new User();\r\n        this.obsoleteUser.mail = \"user@to.delete\";\r\n        this.obsoleteUser.nickname = \"\";\r\n        this.newUser = new User();\r\n        this.newUser.mail = \"\";\r\n        this.newUser.nickname = \"\";\r\n        this.newUser.password = \"\";\r\n    }\r\n\r\n    activate() {\r\n        console.log(\"Adm menu activated\");\r\n        // this.obsoleteUser.mail = \"user@to.delete\"\r\n        // this.obsoleteUser.nickname = \"\";\r\n        var self = this;\r\n\r\n        this.subscription1 = this.ea.subscribe('user-detected', function (e) {\r\n            var existingUser = e.existingUser;\r\n            if (existingUser.mail != \"\") {\r\n                console.log(\"User exists\");\r\n                if (self.task = \"AddUser\") {\r\n                    self.userGateway.add(self.newUser);\r\n                }\r\n                if (self.task = \"DeleteUser\") {\r\n                    self.userGateway.remove(existingUser);\r\n                }\r\n            } else {\r\n                console.log(\"User does not exist\");\r\n            }\r\n        });\r\n\r\n        this.subscription2 = this.ea.subscribe('user-deleted', function (e) {\r\n            var success = e;\r\n            if (success) {\r\n                console.log(\"User deleted\");\r\n            } else {\r\n                console.log(\"Deeleting user failed\");\r\n            }\r\n        });\r\n\r\n        this.subscription3 = this.ea.subscribe('user-added', function (e) {\r\n            var success = e;\r\n            if (success) {\r\n                console.log(\"User added\");\r\n            } else {\r\n                console.log(\"Adding user failed\");\r\n            }\r\n        });\r\n        \r\n    }\r\n\r\n    deactivate() {\r\n        this.subscription1.dispose();\r\n        this.subscription2.dispose();\r\n        this.subscription3.dispose();\r\n    }\r\n\r\n    tryAddUser() {\r\n        this.validationFailed =\r\n            this.newUser.mail.length == 0 ||\r\n            this.newUser.nickname.length == 0 ||\r\n            this.newUser.password.length == 0;\r\n        if (this.validationFailed) {\r\n            console.log(\"Input-Validation failed\");\r\n            //  alert(msg);\r\n            return;\r\n        }\r\n        this.task = \"AddUser\"\r\n\r\n    }\r\n\r\n\r\n    tryDeleteUser() {\r\n        this.task = \"DeleteUser\"\r\n        if (confirm('Do you want to delete this user and all of his broadcasts?')) {\r\n            // TODO delete selected items\r\n            if (this.obsoleteUser.mail.length > 0) {\r\n                this.userGateway.getByMailAddress(this.newUser.mail);\r\n                return;\r\n            }\r\n\r\n            if (this.obsoleteUser.nickname.length > 0) {\r\n                this.userGateway.getByName(this.newUser.mail);\r\n                return;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n}","export class CleanupContent {\r\n    \r\n}","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { ValidationController } from 'aurelia-validation';\r\nimport { UserGateway } from './../../services/user-gateway';\r\nimport { User } from './../../models/user';\r\n\r\n@inject(UserGateway, NewInstance.of(ValidationController))\r\nexport class Cleanup{\r\n    constructor(userGateway, validationController) {\r\n        this.userGateway = userGateway;\r\n        this.validationController = validationController;\r\n        this.temporaryUser = new User();\r\n        this.temporaryUser.nickname = \"X\"; \r\n        this.temporaryUser.mail = 'a@b.c';\r\n        this.temporaryUser.password = '1';\r\n    }\r\n\r\n    validationFailed = false;\r\n    displayMessages = false;  \r\n\r\n    activateUser() {\r\n        console.log(\"Activate user \" + this.temporaryUser.nickname + \" with messages : \" +this.displayMessages );\r\n    }\r\n\r\n    processTask() {\r\n       console.log(\"Process deletion task for user : \" + this.temporaryUser.nickname);\r\n    }\r\n\r\n    testSubmitButton3() {\r\n        console.log(\"Test Submit Buton 3 : \");//+ this.temporaryUser.nickname);\r\n    }\r\n}","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\nimport { UserGateway } from './../../services/user-gateway';\r\nimport { User } from './../../models/user';\r\n\r\n@inject(EventAggregator, UserGateway, User)\r\nexport class AddUser {\r\n\r\n    isBusy = false;\r\n    validationFailed = false;\r\n    addressExists = false;\r\n    nameExists = false;\r\n    isValidPassword = true; // ER: validate PW-Security\r\n\r\n    constructor(eventAggregator, userGateway, user) {\r\n        this.ea = eventAggregator;\r\n        this.userGateway = userGateway;\r\n        this.user = user;\r\n        this.newUser = new User();\r\n        this.newUser.mail = \"\";\r\n        this.newUser.nickname = \"\";\r\n        this.newUser.password = \"\";\r\n    }\r\n\r\n    activate() {\r\n        console.log(\"Adm menu activated\");\r\n        // this.obsoleteUser.mail = \"user@to.delete\"\r\n        // this.obsoleteUser.nickname = \"\";\r\n        var self = this;\r\n\r\n        this.subscription1 = this.ea.subscribe('user-detected', function (e) {\r\n            var existingUser = e.existingUser;\r\n            // display hints if registration fails\r\n            self.addressExists = existingUser.mail != \"\";\r\n            self.nameExists = existingUser.nickname != \"\";\r\n\r\n            if (!self.addressExists && !self.nameExists) {\r\n                console.log(\"User doesn't exist, add him\");\r\n                    self.userGateway.add(self.newUser);\r\n            } else {\r\n                console.log(\"User already exists\");\r\n            }\r\n        });\r\n\r\n        this.subscription2 = this.ea.subscribe('user-added', function (e) {\r\n            var success = e;\r\n            if (success) {\r\n                console.log(\"User added\");\r\n            } else {\r\n                console.log(\"Adding user failed\");\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    deactivate() {\r\n        this.subscription1.dispose();\r\n        this.subscription2.dispose();\r\n    }\r\n    \r\n    tryAddUser() {\r\n        this.validationFailed =\r\n            this.newUser.mail.length == 0 ||\r\n            this.newUser.nickname.length == 0 ||\r\n            this.newUser.password.length == 0;\r\n        if (this.validationFailed) {\r\n            console.log(\"Input-Validation failed\");\r\n            //  alert(msg);\r\n            return;\r\n        }\r\n        this.userGateway.getByMailAddress(this.newUser.mail);\r\n    }\r\n\r\n}","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { ValidationController } from 'aurelia-validation';\r\nimport { UserGateway } from './../../services/user-gateway';\r\nimport { User } from './../../models/user';\r\n\r\n@inject(UserGateway, NewInstance.of(ValidationController))\r\nexport class Statistics {\r\n    constructor(userGateway, validationController) {\r\n        this.userGateway = userGateway;\r\n        this.validationController = validationController;\r\n    }\r\n\r\n    validationFailed = false;\r\n\r\n}","import { bindable } from 'aurelia-framework';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\n\r\nexport class ListEditorCustomElement {\r\n\r\n    @bindable items = [];\r\n    @bindable addItem;\r\n}\r\n","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\nimport { BroadcastGateway } from './../../services/broadcast-gateway';\r\nimport { User } from './../../models/user';\r\n\r\n@inject(EventAggregator, BroadcastGateway, User)\r\nexport class History {\r\n    constructor(eventAggregator, broadcastGateway, user) {\r\n        this.ea = eventAggregator;\r\n        this.user = user;\r\n        this.broadcastGateway = broadcastGateway;\r\n    }\r\n\r\n    vipName = \"\";\r\n    isVeryImportant = false; // vipStatus\r\n\r\n    addVIP(name, status) {\r\n        var vip = new User();\r\n        // TODO : Add or overwrite entry in table 'Followers'\r\n        //    return this.broadcastGateway.addVip(this.vipName,this.isVeryImportant)\r\n        //        .then(() => this.router.navigateToRoute('login'));\r\n\r\n    }\r\n\r\n\r\n\r\n    removeVIP(name, status) {\r\n        var vip = new User();\r\n        //    return this.broadcastGateway.removeVip(this.vipName,this.isVeryImportant)\r\n        //        .then(() => this.router.navigateToRoute('login'));\r\n\r\n    }\r\n\r\n}","import {inject, DOM} from 'aurelia-framework';\n\n@inject(DOM.Element)\nexport class SubmitTaskCustomAttribute {\n\n  constructor(element) {\n    this.element = element;\n    this.onSubmit = this.trySubmit.bind(this);\n  }\n\n  attached() {\n    this.element.addEventListener('submit', this.onSubmit);\n    this.element.isSubmitTaskExecuting = false;\n  }\n\n  trySubmit(e) {\n    e.preventDefault();\n    if (this.task) {\n      return;\n    }\n\n    this.element.isSubmitTaskExecuting = true;\n    this.task = Promise.resolve(this.value()).then(\n      () => this.completeTask(),\n      () => this.completeTask());\n  }\n\n  completeTask() {\n    this.task = null;\n    this.element.isSubmitTaskExecuting = false;\n  }\n\n  detached() {\n    this.element.removeEventListener('submit', this.onSubmit);\n  }\n}\n","export class AccountDetail {\r\n\r\n    activate(temporaryUser) {\r\n        this.user = temporaryUser;\r\n    }\r\n}","import {bindable} from 'aurelia-framework';\n\nexport class ListEditorCustomElement {\n  \n  @bindable items = [];\n  @bindable addItem;\n}\n","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { UserGateway } from './../../services/user-gateway';\r\nimport { User } from './../../models/user';\r\n\r\n@inject(UserGateway)\r\nexport class UserCreation {\r\n    constructor(userGateway) {\r\n        this.userGateway = userGateway;\r\n        this.newUser = new User();  \r\n   }\r\n\r\n    isBusy = false;\r\n    validationFailed = false;\r\n    addressExists = false;\r\n    nameExists = false;\r\n    isValidPassword = true; // ER: validate PW-Security\r\n\r\n    addUser() {\r\n        var msg = \"Add user  \" + newUser.user.toString();\r\n        console.log(msg);\r\n\r\n        // aurelia-validation is much more complex\r\n        this.validationFailed =\r\n            this.newUser.mail.length == 0 ||\r\n        this.newUser.nickname.length == 0 ||\r\n        this.newUser.password.length == 0;\r\n        if (this.validationFailed) {\r\n            console.log(\"Input-Validation failed\");\r\n            //  alert(msg);\r\n            return;\r\n        }\r\n\r\n        // try retrieving user data from storage\r\n        var existingUser = this.userGateway.getByMailAddress(this.newUser.mail);\r\n\r\n        // display hints if registration fails\r\n        this.addressExists = existingUser.mail != null && existingUser.mail.length > 0;\r\n        this.nameExists = existingUser.nickname != null && existingUser.nickname.length > 0;\r\n\r\n        // register as new user\r\n        if (!addressExists && !nameExists) {\r\n            return this.userGateway.add(this.newUser);\r\n        }\r\n    }\r\n}\r\n","export class FilterByValueConverter {\n  toView(array, value, ...properties) {\n    value = (value || '').trim().toLowerCase();\n    \n    if (!value) {\n      return array;\n    }\n    return array.filter(item => \n      properties.some(property => \n        (item[property] || '').toLowerCase().includes(value)));\n  }\n}\n","export class GroupByValueConverter {\n  toView(array, property) {\n    const groups = new Map();\n    for (let item of array) {\n      let key = item[property];\n      let group = groups.get(key);\n      if (!group) {\n        group = { key, items: [] };\n        groups.set(key, group);\n      }\n      group.items.push(item);\n    }\n    return Array.from(groups.values());\n  }\n}\n","export class OrderByValueConverter {\n  toView(array, property, direction = 'asc') {\n    array = array.slice(0);\n    const directionFactor = direction === 'desc' ? -1 : 1;\n    array.sort((item1, item2) => {\n      const value1 = item1[property];\n      const value2 = item2[property];\n      if (value1 > value2) {\n        return directionFactor;\n      } else if (value1 < value2) {\n        return -directionFactor;\n      } else {\n        return 0;\n      }\n    });\n    return array;\n  }\n}\n","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { ValidationController } from 'aurelia-validation';\r\nimport { UserGateway } from './../../../services/user-gateway';\r\nimport { User } from './../../../models/user';\r\n\r\n@inject(UserGateway, NewInstance.of(ValidationController))\r\nexport class Statistics {\r\n    constructor(userGateway, validationController) {\r\n        this.userGateway = userGateway;\r\n        this.validationController = validationController;\r\n        this.user = new User();\r\n    }\r\n\r\n    validationFailed = false;\r\n    displayMessages = false;\r\n\r\n    retrieveSummary() {\r\n        console.log(\"Retrieve summary : \")\r\n    }\r\n\r\n    emptyGrid() {\r\n        console.log(\"Empty summary results : \")\r\n    }\r\n    \r\n}","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\nimport { computedFrom } from 'aurelia-framework';\r\nimport { BroadcastGateway } from './../../../services/broadcast-gateway';\r\nimport { User } from './../../../models/user';\r\nimport { Message } from './../../../models/message';\r\nimport { Toolkit } from './../../../models/toolkit';\r\n\r\n@inject(EventAggregator, BroadcastGateway, User, NewInstance.of(Message))\r\nexport class Broadcast {\r\n\r\n    isBusy = false;\r\n    isImageAttached = false;\r\n    imageUrl = null;\r\n    selectedFiles = null;\r\n    selectedImage = null;\r\n\r\n    constructor(eventAggregator,broadcastGateway, user, message) {\r\n        this.ea = eventAggregator;\r\n        this.broadcastGateway = broadcastGateway;\r\n        this.user = user;\r\n        this.message = message;\r\n        this.toolkit = new Toolkit();\r\n    }\r\n\r\n    activate() {\r\n        var self = this;\r\n\r\n        this.subscription = this.ea.subscribe('message-sent', function (e) {\r\n            console.log(\"Event handler for message-sent\");\r\n            self.isBusy = false;\r\n            //this.message.reset();\r\n            //  this.router.navigateToRoute('login'));\r\n        });\r\n\r\n    }\r\n\r\n    deactivate() {\r\n        this.subscription.dispose();\r\n    }\r\n    \r\n\r\n    @computedFrom('isImageAttached')\r\n    get computedImageUrl() {\r\n        console.log(\"Return image URL :\" + this.imageUrl);\r\n        return this.imageUrl;\r\n    }\r\n\r\n    detachImage() {\r\n        this.imageUrl = null;\r\n        this.isImageAttached = false;\r\n    }\r\n\r\n    updateImageUrl() {\r\n        console.log(\"Update Image URL\");\r\n        if (this.selectedFiles.length > 0) {\r\n            this.isImageAttached = false;\r\n            this.selectedImage = this.selectedFiles[0];\r\n            this.readFileURL(this.selectedImage, this);\r\n            this.isImageAttached = this.imageUrl != null;\r\n        } else {\r\n            detachImage();\r\n        }\r\n    }\r\n\r\n    updatePreview() {\r\n        console.log(\"Update Preview\");\r\n        this.updateImageUrl();\r\n        console.log(\"Updated Image URL :\" + this.imageUrl);\r\n    }\r\n\r\n    readFileURL(selectedFile, broadcast) {\r\n        // load data asynchronously\r\n        var reader = new FileReader();\r\n        reader.onload = (function (selectedImage) {\r\n            return function (e) {\r\n                console.log(\"Selected image :\" + e.target.result);\r\n                broadcast.imageUrl = e.target.result;\r\n            };\r\n        })(selectedFile);\r\n        reader.readAsDataURL(selectedFile);\r\n\r\n    }\r\n\r\n    sendMessage() {\r\n        if (this.isBusy) {\r\n            return;\r\n        };\r\n\r\n     //   this.isBusy = true;\r\n        console.log(\"Send message\");\r\n        if (this.isValidMessage()) {\r\n            this.message.image = this.imageUrl;\r\n            this.message.userId = this.user.id;\r\n            this.message.day = this.toolkit.getDay();\r\n            this.message.time = this.toolkit.getTime();\r\n            // send message --> add message to table 'tweets'\r\n            this.broadcastGateway.addMessage(this.message.text, encodeURIComponent(this.imageUrl));\r\n        }\r\n    }\r\n\r\n    isValidMessage() {\r\n        if (this.isImageAttached) {\r\n            return true;\r\n        } else {\r\n            return this.message.text.length > 0;\r\n        }\r\n    }\r\n\r\n}","import { inject, NewInstance } from 'aurelia-framework';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\n//import { ViewManager } from 'aurelia-view-manager';\r\nimport { BroadcastGateway } from './../../../services/broadcast-gateway';\r\nimport { UserGateway } from './../../../services/user-gateway';\r\nimport { User } from './../../../models/user';\r\nimport { BroadcastFilter } from './../../../models/broadcast-filter';\r\nimport { Toolkit } from './../../../models/toolkit';\r\n\r\n@inject(EventAggregator, BroadcastGateway, UserGateway, User)\r\nexport class History {\r\n\r\n    isBusy = false;\r\n    vipName = \"\";\r\n    isVeryImportant = false; // vipStatus\r\n\r\n    receivedTweets = [];\r\n    timeRange = [\r\n        { firstDay: \"\" },\r\n        { lastDay: \"\" }\r\n    ];\r\n\r\n    constructor(eventAggregator, broadcastGateway, userGateway, user) {\r\n        this.ea = eventAggregator;\r\n        this.broadcastGateway = broadcastGateway;\r\n        this.userGateway = userGateway;\r\n        this.user = user;\r\n        this.senderFilter = new BroadcastFilter();\r\n        this.toolkit = new Toolkit();\r\n\r\n        this.showNoMessages = false;\r\n        this.showMyMessages = true;\r\n        this.showTweetsOfSpecialUser = false;\r\n        this.nameOfSpecialUser = \"\";\r\n        this.showTweetsOfActiveVips = false;\r\n\r\n        this.useRerestrictedTimeRange = true;\r\n        this.firstDay = null;\r\n        this.lastDay = null;\r\n    }\r\n\r\n    activate() {\r\n        var self = this;\r\n        this.useRerestrictedTimeRange = true;\r\n\r\n        this.subscription1 = this.ea.subscribe('messages-downloaded', function (e) {\r\n            console.log(\"Event handler for messages-downloaded\");\r\n            console.log(e);\r\n            e.messages.forEach(function (element) {\r\n                self.receivedTweets.push(element);\r\n            }, this);\r\n\r\n            self.isBusy = false;\r\n        });\r\n\r\n        this.subscription2 = this.ea.subscribe('user-detected', function (e) {\r\n            console.log(\"Event handler for messages-detected\");\r\n            console.log(e);\r\n            var existingUser = e.existingUser;\r\n            if (existingUser.mail != \"\") {\r\n                console.log(\"Add \" + existingUser.nickname + \" to list\");\r\n                self.persons.push(existingUser.id);\r\n                console.log(\"Request messages for \" + persons);\r\n                self.broadcastGateway.getSomeMessages(persons, self.timeRange.firstDay, self.timeRange.lastDay);\r\n            } else {\r\n                console.log(\"User does not exist\");\r\n            }\r\n\r\n            self.isBusy = false;\r\n        });\r\n\r\n        this.subscription3 = this.ea.subscribe('messages-removed', function (e) {\r\n            console.log(\"Event handler for messages-deletion\");\r\n            self.isBusy = false;\r\n        });\r\n\r\n    }\r\n\r\n    deactivate() {\r\n        this.subscription1.dispose();\r\n        this.subscription2.dispose();\r\n        this.subscription3.dispose();\r\n    }\r\n\r\n    cleanupTable() {\r\n        this.receivedTweets = [];\r\n    }\r\n\r\n    retrieveMessages() {\r\n        if (this.isBusy) {\r\n            // return;\r\n        };\r\n\r\n        // Create message filter from input \r\n        var persons = new Array();\r\n        this.cleanupTable();\r\n\r\n        var d1 = new Date(2017, 1, 1);\r\n        var d2 = new Date();\r\n        this.timeRange.firstDay = this.toolkit.getTimestampOfFirstDay(d1);\r\n        this.timeRange.lastDay = this.toolkit.getTimestampOfLastDay(d2);\r\n        if (this.useRerestrictedTimeRange) {\r\n            if (this.firstDay != null) {\r\n                var d3 = new Date(this.firstDay);\r\n                this.timeRange.firstDay = this.toolkit.getTimestampOfFirstDay(d3);\r\n            }\r\n            if (this.lastDay != null) {\r\n                var d4 = new Date(this.lastDay);\r\n                this.timeRange.lastDay = this.toolkit.getTimestampOfLastDay(d4);\r\n            }\r\n        }\r\n\r\n        if (this.showTweetsOfActiveVips) {\r\n            this.user.vips.forEach(function (element) {\r\n                persons.push(element);\r\n            }, this);\r\n        };\r\n\r\n        if (this.showMyMessages) {\r\n            persons.push(this.user.id);\r\n        };\r\n\r\n        if (this.showTweetsOfSpecialUser) {\r\n            this.userGateway.getByName(this.nameOfSpecialUser);\r\n            return;\r\n        };\r\n\r\n        this.isBusy = true;\r\n        console.log(\"Request messages\");\r\n        this.broadcastGateway.getSomeMessages(persons, this.timeRange.firstDay, this.timeRange.lastDay);\r\n    }\r\n\r\n\r\n\r\n    removeMessages() {\r\n        if (this.isBusy) {\r\n            return;\r\n        };\r\n\r\n        this.isBusy = true;\r\n        console.log(\"Request message-deletion\");\r\n        this.broadcastGateway.removeMessages(this.user.id);\r\n    }\r\n\r\n}","export class MessageFilter {\r\n    activate(msgFilter) {\r\n        this.msgFilter = history.senderFilter;\r\n    }\r\n}","function tweetTable(dataTable) {\r\n    // Private properties\r\n    var activeTable = dataTable;\r\n    var tableType = \"small\";\r\n    var selectionRange = [-1, -1];\r\n    var sorting = [];\r\n    sorting[0] = \"descending\";\r\n    sorting[1] = \"descending\";\r\n    sorting[2] = \"descending\";\r\n\r\n    // Private methods\r\n    function createTableHeader(columns) {\r\n        var header = document.createElement(\"thead\");\r\n        var row = document.createElement(\"tr\");\r\n        var col, content;\r\n\r\n        for (var i = 0; i < columns.length; i++) {\r\n            col = document.createElement(\"th\");\r\n            content = document.createTextNode(columns[i]);\r\n            col.appendChild(content);\r\n            row.appendChild(col);\r\n        }\r\n\r\n        header.appendChild(row);\r\n        return header;\r\n    }\r\n\r\n    function populateTable(tweetsToDisplay, indexOfFirstTweetProperty, amountOfColumns) {\r\n        // small table : indexOfFirstColumn = 1\r\n        var body = document.createElement(\"tbody\");\r\n        var row, col, content;\r\n        var tweetData;\r\n        var user = userRecord;\r\n\r\n        for (var rowIndex = 0; rowIndex < tweetsToDisplay.length; rowIndex++) {\r\n            row = document.createElement(\"tr\");\r\n            setRowColor(row, rowIndex);\r\n\r\n            tweetData = tweetsToDisplay[rowIndex];\r\n\r\n            for (var colIndex = indexOfFirstTweetProperty; colIndex < amountOfColumns; colIndex++) {\r\n                col = document.createElement(\"td\");\r\n                switch (colIndex) {\r\n                    case 0:\r\n                      //  user = storageReader.retrieveUserDataByID(tweetData.userID)\r\n                        // content = document.createTextNode(user.username);\r\n                        content = document.createTextNode(tweetData.userID);                       \r\n                        break;\r\n                    case 1:\r\n                        content = document.createTextNode(tweetData.day);\r\n                        break;\r\n                    case 2:\r\n                        content = document.createTextNode(tweetData.time);\r\n                        break;\r\n                    case 3:\r\n                        content = document.createTextNode(tweetData.message);\r\n                        break;\r\n                    case 4:\r\n                        // attachment\r\n                        content = document.createElement('IMG');\r\n                        if ((tweetData.attachment != null) && (tweetData.attachment != \"\")) {\r\n                            content.setAttribute(\"src\", tweetData.attachment);\r\n                            content.setAttribute(\"height\", \"auto\");\r\n                            content.setAttribute(\"width\", \"100px\");\r\n                            content.setAttribute(\"alt\", \"Attached Image\");\r\n                        }\r\n                        break;\r\n                }\r\n                col.appendChild(content);\r\n                row.appendChild(col);\r\n            }\r\n\r\n            body.appendChild(row);\r\n        }\r\n        return body;\r\n    }\r\n\r\n    function setRowColor(row, index) {\r\n        if (mwaToolset.isEven(index)) {\r\n            row.setAttribute(\"class\", \"even\");\r\n        } else {\r\n            row.removeAttribute(\"class\");\r\n        }\r\n    }\r\n\r\n    function selectFromTo(range, rows) {\r\n        var firstIndex = range[0] - 1;\r\n        var lastIndex = range[1] - 1;\r\n\r\n        if (firstIndex > lastIndex) {\r\n            firstIndex = range[1] - 1;\r\n            lastIndex = range[0] - 1;\r\n        }\r\n\r\n        for (i = 0; i < rows.length; i++) {\r\n            switch (true) {\r\n                case (i < firstIndex):\r\n                    rows[i].classList.toggle('selected', false);\r\n                    break;\r\n                case (i > lastIndex):\r\n                    rows[i].classList.toggle('selected', false);\r\n                    break;\r\n                default:\r\n                    rows[i].classList.toggle('selected', true);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    function deselectAll() {\r\n        var region = activeTable.getElementsByTagName(\"TBODY\")[0];\r\n        var rows = region.getElementsByTagName(\"tr\");\r\n\r\n        for (i = 0; i < rows.length; i++) {\r\n            rows[i].classList.toggle('selected', false);\r\n        }\r\n    }\r\n\r\n    function deleteSelectedRows(userID) {\r\n        if (activeTable == null) {\r\n            alert(\"No items selected\");\r\n        } else {\r\n            var selectedRows = getSelectedRows(activeTable);\r\n            var selectedItems = getSelectedItems(selectedRows, userID);\r\n            if (storageWriter.deleteSelectedTweets(userID, selectedItems)) {\r\n                var tweets = storageReader.getSubsetOfTweetsByID(userID);\r\n                updateContent(tweets);\r\n            }\r\n        }\r\n    }\r\n\r\n    function getSelectedRows(table) {\r\n        var region = table.getElementsByTagName(\"TBODY\")[0];\r\n        var selectedRows = region.getElementsByClassName('selected');\r\n        return selectedRows;\r\n    }\r\n\r\n    function getSelectedItems(selectedRows, userID) {\r\n        var selectedItems = [];\r\n        var dayIndex = 0;\r\n        if (tableType != 'small') {\r\n            dayIndex = 1;\r\n        }\r\n        var timeIndex = dayIndex + 1;\r\n        var day, time;\r\n\r\n        for (i = 0; i < selectedRows.length; i++) {\r\n            day = selectedRows[i].children[dayIndex].innerText;\r\n            time = selectedRows[i].children[timeIndex].innerText;\r\n            selectedItems.push(tweetCreator.createTweet(userID, day, time, \"\", \"\"));\r\n        }\r\n\r\n        return selectedItems;\r\n    }\r\n\r\n    function updateContent(subsetOfTweets) {\r\n        var header, body;\r\n        var columns = [];\r\n\r\n        try {\r\n            activeTable.innerHTML = \"\";\r\n\r\n            if (tableType == \"small\") {\r\n                columns = [\"Day\", \"Time\", \"Message\", \"Attachment\"];\r\n                header = createTableHeader(columns);\r\n                body = populateTable(subsetOfTweets, 1, columns.length + 1);\r\n            } else {\r\n                columns = [\"Author\", \"Day\", \"Time\", \"Message\", \"Attachment\"];\r\n                header = createTableHeader(columns);\r\n                body = populateTable(subsetOfTweets, 0, columns.length);\r\n            }\r\n\r\n            activeTable.appendChild(header);\r\n            activeTable.appendChild(body);\r\n\r\n            mwaToolset.resetSelectionRange();\r\n\r\n        } catch (e) {\r\n            var err = e.name + ' ' + e.message;\r\n            alert(err);\r\n            success = false;\r\n\r\n        } finally {\r\n\r\n        }\r\n    }\r\n\r\n    // Table data sorting \r\n    function sortTextData(columnIndex) {\r\n        var region = activeTable.getElementsByTagName(\"TBODY\")[0];\r\n        var rows = region.getElementsByTagName(\"tr\");\r\n        var item1;\r\n        var item2;\r\n        var swap = false;\r\n\r\n        for (var i = 0; i < rows.length - 1; i++) {\r\n            for (var j = 0; j < rows.length - (i + 1); j++) {\r\n\r\n                item1 = rows.item(j).getElementsByTagName('td').item(columnIndex).innerHTML;\r\n                item2 = rows.item(j + 1).getElementsByTagName('td').item(columnIndex).innerHTML;\r\n                // Swap rows if sort condition matches\r\n                if (sorting[columnIndex] == \"ascending\") {\r\n                    swap = item1 > item2;\r\n                } else {\r\n                    swap = item1 < item2;\r\n                }\r\n                if (swap) {\r\n                    region.insertBefore(rows.item(j + 1), rows.item(j));\r\n                }\r\n            }\r\n        }\r\n\r\n        // restore alternating row background\r\n        for (var i = 0; i < rows.length - 1; i++) {\r\n            setRowColor(rows[i], i);\r\n        }\r\n    }\r\n\r\n    function toggleSorting(columnIndex) {\r\n        if (sorting[columnIndex] == \"descending\") {\r\n            sorting[columnIndex] = \"ascending\";\r\n        } else {\r\n            sorting[columnIndex] = \"descending\";\r\n        }\r\n    }\r\n    // ___________________________________________________________\r\n    // Public methods\r\n\r\n    var tableObject = {\r\n\r\n        setTableType: function (typeOfTable) {\r\n            tableType = typeOfTable;\r\n        },\r\n\r\n        updateTable: function (subsetOfTweets) {\r\n            updateContent(subsetOfTweets);\r\n        },\r\n\r\n        findTweets: function (e) {\r\n            var activeTable = e.currentTarget;\r\n            var selectedColumn = e.target;\r\n            var currentRow = e.target.parentNode;\r\n            var nameOfRegion = e.target.parentNode.parentNode.nodeName;\r\n            var selectedRows = [];\r\n            var startIndex = selectionRange[0];\r\n\r\n            switch (nameOfRegion) {\r\n                case 'THEAD':\r\n                    // switch sort order\r\n                    var upperBound = 3;\r\n                    if (tableType = \"small\") { upperBound = 2 };\r\n\r\n                    if (selectedColumn.cellIndex <= upperBound) {\r\n                        toggleSorting(selectedColumn.cellIndex);\r\n                        sortTextData(selectedColumn.cellIndex)\r\n                    }\r\n                    break;\r\n\r\n                case 'TBODY':\r\n                    // highlight selected rows\r\n                    selectedRows = getSelectedRows(activeTable);\r\n\r\n                    if (selectionRange[0] < 0) {\r\n                        if (selectedRows.length > 0) {\r\n                            deselectAll();\r\n                        }\r\n                        currentRow.classList.toggle('selected');\r\n                        selectionRange[0] = currentRow.rowIndex; // startIndex\r\n                    } else {\r\n                        switch (true) {\r\n                            case (e.ctrlKey):\r\n                                // append row to selection list\r\n                                if (e.ctrlKey) {\r\n                                    currentRow.classList.toggle('selected');\r\n                                }\r\n                                break;\r\n\r\n                            case ((e.shiftKey) && (startIndex >= 0)):\r\n                                // create selection list as region\r\n                                if ((e.shiftKey) && (startIndex >= 0)) {\r\n                                    if (currentRow.rowIndex == startIndex) {\r\n                                        currentRow.classList.toggle('selected');\r\n                                    } else {\r\n                                        selectionRange[1] = currentRow.rowIndex;\r\n                                        var region = activeTable.getElementsByTagName(\"TBODY\")[0];\r\n                                        var allRows = region.getElementsByTagName(\"tr\");\r\n                                        selectFromTo(selectionRange, allRows);\r\n                                    }\r\n                                    mwaToolset.resetSelectionRange();\r\n                                }\r\n                                break;\r\n                            case (true):\r\n                                // refuse existing selection list, start a new one\r\n                                if (selectedRows.length > 0) {\r\n                                    deselectAll();\r\n                                    mwaToolset.resetSelectionRange();\r\n                                }\r\n                                currentRow.classList.toggle('selected');\r\n                                selectionRange[0] = currentRow.rowIndex; // startIndex\r\n                                break;\r\n                        }\r\n                    }\r\n            }\r\n        },\r\n\r\n        deleteAllTweets: function (userID) {\r\n            if (storageWriter.deleteUserTweets(userID)) {\r\n                var tweets = storageReader.getSubsetOfTweetsByID(userID);\r\n                updateContent(tweets);\r\n            }\r\n        },\r\n\r\n        deleteSelectedTweets: function (userID) {\r\n            //deleteSelectedRows(userID);\r\n\r\n            if (activeTable == null) {\r\n                alert(\"No items selected\");\r\n                return;\r\n            }\r\n            var selectedRows = getSelectedRows(activeTable);\r\n            if (selectedRows.length == 0) {\r\n                alert(\"No items selected\");\r\n                return;\r\n            }\r\n\r\n            var selectedItems = getSelectedItems(selectedRows, userID);\r\n            if (storageWriter.deleteSelectedTweets(userID, selectedItems)) {\r\n                var tweets = storageReader.getSubsetOfTweetsByID(userID);\r\n                updateContent(tweets);\r\n            }\r\n        }\r\n    };\r\n    return tableObject;\r\n\r\n}"],"sourceRoot":".."}